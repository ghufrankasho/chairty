<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>support</title>

    <!--  css file -->
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/all.min.css" />
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/alert.css">

    <!-- icon rel -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />









</head>

<body>


    <div class="homepagesup">
        <div class="header">
            <input type="checkbox" name="" id="toggler">
            <label for="toggler" class="fas fa-bars"></label>

            <a href="/users/userHome.html"  class="logo" id="user_name"><span>.</span></a>

            <nav class="navu">
             <a href="#proj">زمن المشروع</a>  
                <a href="#projj">المشاريع</a>
                
                 <a href="#site-banner">الرئيسية</a>

            </nav>

            <div class="icons">
                <a href="/#" class="fas fa-heart"></a>
                <a href="/#" class="fas fa-shopping-cart"></a>
      
            </div>
        </div>



        <!-- header section ends -->


        <!--  ======================= Start Main Area ================================ -->
        <div class="site-main">

            <section class="site-banner" id="site-banner">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-6 col-md-12 site-title">
                            <h3 class="title-text">Hey</h3>
                            <h1 class="title-text text-uppercase" id="user_name1"> </h1>
                            
                            <div class="site-buttons">
                                <div class="d-flex flex-row flex-wrap">


                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-12 banner-image">
                            <img src="/img/banner-image.png" id="user_img" alt="banner-img" class="img-fluid">
                        </div>
                    </div>
                </div>
            </section>
        


        </div>

        <div class="mainPro">

            <div class="hard pt-5" id="projj">

                <div class="container">
                    <div class="row align-items-center" id="projects">
                        <!-- <div class="col-md-6 col-lg-3 box1 mb-5">
                            <div class="box bg-light">
                                <img class="img-fluid " src="/img/p1.jpeg">
                                <h4 class="p-3 text-success text-center">Water Damage</h4>
                                <p class=" p-3 ">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eveniet</p>

                                <div class="info">
                                    <a href="/prodetail.html">Read more</a>
                                    <i class="fas fa-long-arrow-alt-right"></i>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3 box1 mb-5">
                            <div class="box bg-light">
                                <img class="img-fluid " src="/img/p3.png">
                                <h4 class="p-3 text-success text-center">Water Damage</h4>
                                <p class=" p-3 ">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eveniet</p>

                                <div class="info">
                                    <a href="/prodetail.html">Read more</a>
                                    <i class="fas fa-long-arrow-alt-right"></i>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3 box1 mb-5">
                            <div class="box bg-light">
                                <img class="img-fluid " src="/img/p2.png">
                                <h4 class="p-3 text-success text-center">Crashed Screen</h4>
                                <p class=" p-3 ">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eveniet</p>

                                <div class="info">
                                    <a href="/prodetail.html">Read more</a>
                                    <i class="fas fa-long-arrow-alt-right"></i>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3 box1 mb-5">
                            <div class="box bg-light">
                                <img class="img-fluid " src="/img/photo.png">
                                <h4 class="p-3 text-success text-center">non Working Speaker</h4>
                                <p class=" p-3 ">Lorem, ipsum dolor sit amet consectetur adipisicing elit.</p>

                                <div class="info">
                                    <a href="/prodetail.html">Read more</a>
                                    <i class="fas fa-long-arrow-alt-right"></i>
                                </div>
                            </div>
                        </div> -->
                        <div class="title text-center py-2 m-5">
                            <h2 class="position-relative d-inline-block" dir="rtl"> المشاريع </h2>
                            <h5 class="card-title" id="usersh" style = "display:none">لا يوجد  مشاريع</h5>
                          </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="homepagesupp">
        <section class="proj" id="proj">
            <h2 class="heading text-center fw-bold text-success"> <span>مشاريع الجمعية</span></h2>
            <div class="proj-row ">
                <div class="proj-column ">
                    <h3 class="title">المشاريع</h3>
                    <div class="proj-box ">
                        <div class="proj-content">
                            <div class="progres">
                                <h3>مطبخ خيري <span>90%</span></h3>
                                <div class="bar"><span></span></div>
                            </div>

                            <div class="progres">
                                <h3>زلزال<span>80%</span></h3>
                                <div class="bar"><span></span></div>
                            </div>

                            <div class="progres">
                                <h3>سلل غذائية <span>65%</span></h3>
                                <div class="bar"><span></span></div>
                            </div>

                            <div class="progres">
                                <h3>كفالة يتيم<span>75%</span></h3>
                                <div class="bar"><span></span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="proj-column ">
                    <h3 class="title">المشاريع</h3>
                    <div class="proj-box">
                        <div class="proj-content">
                            <div class="progres">
                                <h3>مطبخ خيري <span>90%</span></h3>
                                <div class="bar"><span></span></div>
                            </div>

                            <div class="progres">
                                <h3>زلزال<span>80%</span></h3>
                                <div class="bar"><span></span></div>
                            </div>

                            <div class="progres">
                                <h3>سلل غذائية <span>65%</span></h3>
                                <div class="bar"><span></span></div>
                            </div>

                            <div class="progres">
                                <h3>كفالة يتيم<span>75%</span></h3>
                                <div class="bar"><span></span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>
    <script >
        document.addEventListener('DOMContentLoaded', function () {
            let user = JSON.parse(localStorage.getItem('user')); // Parse the stringified JSON
            if (user && user.image) {
                let img = document.getElementById('user_img');
                let name = document.getElementById('user_name');
                let name1 = document.getElementById('user_name1');
                img.src = user.image;
                name.textContent=user.first_name ;
                name1.textContent=user.last_name ;
            } else {
                console.log("User not found or image is missing");
            }
            console.log(user);
            displayuser(user.id);
        });
        function displayuser(id){

    
                const xhr = new XMLHttpRequest();
                xhr.open('GET', `http://127.0.0.1:8000/api/user/show?id=${id}`, true);
            
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4) {
                        if (xhr.status === 200) {
                            const response = JSON.parse(xhr.responseText);
                        
                            try {
                                const response = JSON.parse(xhr.responseText);
                            
                                
                                if(response. project!==null )
                                {
                                    const projectContainer = document.getElementById('projects');
                        
                                    // Clear existing projects
                                    projectContainer.innerHTML = '';
                                    
                                    
                                        const projectDiv = document.createElement('div');
                                        projectDiv.className = 'col-md-6 col-lg-3 box1 mb-5';
                                        projectDiv.innerHTML = `
                                        <div class="box bg-light">
                                            <img class="img-fluid "  src="${response. project.image}" alt="">
                                        
                                            <h4 class="p-3 text-success text-center">${response. project.name}</h4>
                                            <p class=" p-3 ">${response. project.description}</p>
                                        <div class="info">
                                            <a href="#" id="more-${response.project.id}">Read more</a>
                                            <i class="fas fa-long-arrow-alt-right"></i>
                                        </div>
                                        </div>
                                            </div>`;
                                        
                                        projectContainer.appendChild(projectDiv);
                                        
                                        const moreButton = document.getElementById(`more-${response.project.id}`);
                                        moreButton.addEventListener('click', function() {
                                            event.preventDefault(); // Prevent default link behavior
                                            const projectId = response.project.id;
                                            localStorage.setItem('image',response.project.image);
                                            localStorage.setItem('description',response.project.description);
                                            localStorage.setItem('name',response.project.name);
                                            if(response.project.fundrise==0)localStorage.setItem('fundrise',0);
                                            else localStorage.setItem('fundrise',response.project.fundrise);
                                            
                                            window.location.href = `/prodetail.html?projectId=${response.project.id}`;
                                        });
                                        
                                    
                                
                                }
                                else{
                                    document.getElementById("usersh").style.display = "block"
                                }
                                
                                
                            } catch (e) {
                                console.error("Failed to parse response JSON:", e);
                            }
                        } else {
                            console.error("Error with request, status code:", xhr.status);
                        }
                    }
                };

                xhr.setRequestHeader('Content-Type', 'application/json');
                xhr.send();
         }
        
    </script>
</body>

</html>