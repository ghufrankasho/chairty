<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>support</title>

    <!--  css file -->
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/all.min.css" />
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/alert.css">

    <!-- icon rel -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />









</head>

<body>
    <div class="homepagesup">
        <div class="header">
            <input type="checkbox" name="" id="toggler">
            <label for="toggler" class="fas fa-bars"></label>

            <a href="#" class="logo" id="employee_name"><span>.</span></a>

            <nav class="navu">
                <a href="main.html">الرئيسية</a>
              

            </nav>

            <div class="icons">
                <a href="#" class="fas fa-heart"></a>
                <a href="#" class="fas fa-shopping-cart"></a>
                <a href="prof.html" class="fas fa-employee"></a>
            </div>
        </div>
    </div>


    <div class="homepageemp" style="margin-top: 130px;">
        <table class="content-table">
            <thead>

                <tr>

                    <th>الأيام المتبقية </th>
                    <th>الأيام المأخوذة</th>
                    <th>العطل</th>

                </tr>
            </thead>
            <tbody>
                <tr>

                    <td>2</td>
                    <td>6</td>
                    <td></td>

                </tr>
              

            </tbody>
        </table>
        <br>
        <table class="content-table">
            <thead>

                <tr>

                    <th>تاريخ القبض </th>
                    <th>الحسومات </th>
                    <th>الراتب</th>
                    <th>الراتب </th>

                </tr>
            </thead>
            <tbody>
                <tr>

                    <td>2/2/1024</td>
                    <td>600000</td>
                    <td>120000</td>
                    <td></td>

                </tr>


            </tbody>
        </table>
        <br>
        <table class="content-table">
            <thead>

                <tr>


                    <th>المهمة </th>
                    <th>اللأيام </th>
                    <th>اسم المشروع </th>
                    <th>المشاريع </th>

                </tr>
            </thead>
            <tbody>
                <tr>

                    <td>فريق تجوال</td>
                    <td>الأحد 1/2/2024</td>
                    <td>مشروع 1</td>
                    <td></td>

                </tr>


            </tbody>
        </table>


    </div>


    <script >
        document.addEventListener('DOMContentLoaded', function () {
            let employee = JSON.parse(localStorage.getItem('employee')); // Parse the stringified JSON
            if (employee && employee.image) {
               // let img = document.getElementById('employee_img');
                let name = document.getElementById('employee_name');
               // let name1 = document.getElementById('employee_name1');
              //  img.src = employee.image;
                name.textContent=employee.first_name ;
               // name1.textContent=employee.last_name ;
            } else {
                console.log("employee not found or image is missing");
            }
            console.log(employee);
           // displayemployee(employee.id);
        });
        function displayemployee(id){

    
                const xhr = new XMLHttpRequest();
                xhr.open('GET', `http://127.0.0.1:8000/api/employee/show?id=${id}`, true);
            
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4) {
                        if (xhr.status === 200) {
                            const response = JSON.parse(xhr.responseText);
                        
                            try {
                                const response = JSON.parse(xhr.responseText);
                            
                                
                                if(response. project!==null )
                                {
                                    const projectContainer = document.getElementById('projects');
                        
                                    // Clear existing projects
                                    projectContainer.innerHTML = '';
                                    
                                    
                                        const projectDiv = document.createElement('div');
                                        projectDiv.className = 'col-md-6 col-lg-3 box1 mb-5';
                                        projectDiv.innerHTML = `
                                        <div class="box bg-light">
                                            <img class="img-fluid "  src="${response. project.image}" alt="">
                                        
                                            <h4 class="p-3 text-success text-center">${response. project.name}</h4>
                                            <p class=" p-3 ">${response. project.description}</p>
                                        <div class="info">
                                            <a href="#" id="more-${response.project.id}">Read more</a>
                                            <i class="fas fa-long-arrow-alt-right"></i>
                                        </div>
                                        </div>
                                            </div>`;
                                        
                                        projectContainer.appendChild(projectDiv);
                                        
                                        const moreButton = document.getElementById(`more-${response.project.id}`);
                                        moreButton.addEventListener('click', function() {
                                            event.preventDefault(); // Prevent default link behavior
                                            const projectId = response.project.id;
                                            localStorage.setItem('image',response.project.image);
                                            localStorage.setItem('description',response.project.description);
                                            localStorage.setItem('name',response.project.name);
                                            if(response.project.fundrise==0)localStorage.setItem('fundrise',0);
                                            else localStorage.setItem('fundrise',response.project.fundrise);
                                            
                                            window.location.href = `/prodetail.html?projectId=${response.project.id}`;
                                        });
                                        
                                    
                                
                                }
                                else{
                                    document.getElementById("employeesh").style.display = "block"
                                }
                                
                                
                            } catch (e) {
                                console.error("Failed to parse response JSON:", e);
                            }
                        } else {
                            console.error("Error with request, status code:", xhr.status);
                        }
                    }
                };

                xhr.setRequestHeader('Content-Type', 'application/json');
                xhr.send();
         }
        
    </script>
</body>

</html>